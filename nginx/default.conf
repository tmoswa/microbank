server {
    listen 80;

    # Rate limit per IP: 3 requests per second, burst of 5
    limit_req_zone $binary_remote_addr zone=perip:10m rate=3r/s;

    # Banking-service routes
    location /api/accounts/ {
        limit_req zone=perip burst=5 nodelay;
        proxy_pass http://banking-service:8080;
    }

    # Client-service routes (optional)
    location /api/clients/ {
        proxy_pass http://client-service:8080;
    }

    # Static frontend (if any)
    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
    }
}
